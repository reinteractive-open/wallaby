<%
filters = current_model_decorator.filters
current_filter = index_params[:filter] || :all
html_options = proc do |filter_name|
  { class: current_filter.to_s == filter_name.to_s ? 'filters--current' : '' }
end
%>
<nav class="filters">
  <% if filters.present? %>
    <a role="button" data-target="#" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="true">
      <%= filter_label(current_filter) || all_label %>
    </a>
    <ul>
      <li><em><%= t 'filters.title' %></em></li>
      <% filters.keys.unshift(:all).each do |filter_name| %>
        <%= content_tag :li, filter_link(filter_name), html_options.call(filter_name) %>
      <% end %>
    </ul>
  <% else %>
    <%= all_label %>
  <% end %>
</nav>
